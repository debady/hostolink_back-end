SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;
SET default_tablespace = '';
SET default_table_access_method = heap;
CREATE TABLE public.commentaire (
    id_commentaire integer NOT NULL,
    id_publication integer NOT NULL,
    id_user integer NOT NULL,
    contenu text NOT NULL,
    date_commentaire timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);
CREATE SEQUENCE public.commentaire_id_commentaire_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
ALTER SEQUENCE public.commentaire_id_commentaire_seq OWNED BY public.commentaire.id_commentaire;
CREATE TABLE public.partage (
    id_partage integer NOT NULL,
    id_publication integer NOT NULL,
    id_user integer NOT NULL,
    date_partage timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    lien_partage character varying(255),
    plateforme_partage character varying(255),
    nombre_clics integer DEFAULT 0
);
CREATE SEQUENCE public.partages_id_partage_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
ALTER SEQUENCE public.partages_id_partage_seq OWNED BY public.partage.id_partage;
CREATE TABLE public.publication (
    id_publication integer NOT NULL,
    id_user integer NOT NULL,
    titre_publication character varying(255) NOT NULL,
    contenu text NOT NULL,
    image character varying(255),
    date_publication timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    compteur_like integer DEFAULT 0
);
CREATE SEQUENCE public.publication_id_publication_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
ALTER SEQUENCE public.publication_id_publication_seq OWNED BY public.publication.id_publication;
ALTER TABLE ONLY public.commentaire ALTER COLUMN id_commentaire SET DEFAULT nextval('public.commentaire_id_commentaire_seq'::regclass);
ALTER TABLE ONLY public.partage ALTER COLUMN id_partage SET DEFAULT nextval('public.partages_id_partage_seq'::regclass);
ALTER TABLE ONLY public.publication ALTER COLUMN id_publication SET DEFAULT nextval('public.publication_id_publication_seq'::regclass);
COPY public.commentaire (id_commentaire, id_publication, id_user, contenu, date_commentaire) FROM stdin;
1	5	106	C'est moi utilisateur 106	2025-03-05 09:03:04.226237
2	5	106	C'est pas moi utilisateur 106	2025-03-05 09:06:19.710216
3	5	106	non je rigole c'est moi le 106	2025-03-05 09:06:48.891168
4	4	106	je suis sur la publication 4	2025-03-05 09:08:03.295399
6	4	108	moi 105 je suis sur la publication 4	2025-03-05 09:09:08.139871
7	4	114	moi 105 je suis sur la publication 5	2025-03-05 09:09:21.759208
8	5	108	Ceci est un commentaire sur la publication	2025-03-05 09:48:13.602408
9	5	108	Mon commentaire sur cette publication sp√©cifique	2025-03-05 09:57:50.761033
10	4	110	moi 110 je suis sur la publication 5	2025-03-05 11:28:19.21156
11	5	108	Mon commentaire sur cette publication 5	2025-03-05 11:29:31.523845
12	11	108	Mon commentaire sur cette publication 11	2025-03-05 11:29:43.853643
\.
COPY public.partage (id_partage, id_publication, id_user, date_partage, lien_partage, plateforme_partage, nombre_clics) FROM stdin;
1	5	110	2025-03-05 12:43:13.007666	undefined/shared/9e9ae8c6-e0b9-4b22-bfa3-fe118327fd60	Facebook	0
\.
COPY public.publication (id_publication, id_user, titre_publication, contenu, image, date_publication, compteur_like) FROM stdin;
4	106	Ma premi√®re publication.	Ceci est le contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-04 16:24:49.114	0
5	106	Ma premi√®re publication.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-04 16:26:56.218	0
8	110	Ma premi√®re publication.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-05 10:12:07.632	0
10	109	Ma premi√®re publication.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-05 10:18:01.229	0
11	110	Ma premi√®re publication 110.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-05 11:27:20.937	2
6	108	Ma premi√®re publication.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-05 09:41:53.309	3
9	109	Ma premi√®re publication.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-05 10:17:17.855	1
7	114	Titre de ma publication	Contenu d√©taill√© de la publication	http://example.com/image.jpg	2025-03-05 09:52:24.183	4
12	106	Ma premi√®re publication 110.	Ceci est contenu de ma premi√®re publication.	http://example.com/image.jpg	2025-03-05 12:04:23.486	0
\.
SELECT pg_catalog.setval('public.commentaire_id_commentaire_seq', 12, true);
SELECT pg_catalog.setval('public.partages_id_partage_seq', 1, true);
SELECT pg_catalog.setval('public.publication_id_publication_seq', 12, true);
ALTER TABLE ONLY public.commentaire ADD CONSTRAINT commentaire_pkey PRIMARY KEY (id_commentaire);
ALTER TABLE ONLY public.partage ADD CONSTRAINT partages_pkey PRIMARY KEY (id_partage);
ALTER TABLE ONLY public.publication ADD CONSTRAINT publication_pkey PRIMARY KEY (id_publication);
ALTER TABLE ONLY public.commentaire ADD CONSTRAINT commentaire_ibfk_1 FOREIGN KEY (id_publication) REFERENCES public.publication(id_publication) ON DELETE CASCADE;
ALTER TABLE ONLY public.commentaire ADD CONSTRAINT commentaire_ibfk_2 FOREIGN KEY (id_user) REFERENCES public.utilisateur(id_user) ON DELETE CASCADE;
ALTER TABLE ONLY public.partage ADD CONSTRAINT partages_ibfk_1 FOREIGN KEY (id_publication) REFERENCES public.publication(id_publication) ON DELETE CASCADE;
ALTER TABLE ONLY public.partage ADD CONSTRAINT partages_ibfk_2 FOREIGN KEY (id_user) REFERENCES public.utilisateur(id_user) ON DELETE CASCADE;
ALTER TABLE ONLY public.publication ADD CONSTRAINT publication_ibfk_1 FOREIGN KEY (id_user) REFERENCES public.utilisateur(id_user) ON DELETE CASCADE;






#main.ts
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';
import { ValidationPipe } from '@nestjs/common';
import { NestExpressApplication } from '@nestjs/platform-express';
import { join } from 'path';

async function bootstrap() {
  const app = await NestFactory.create<NestExpressApplication>(AppModule);

  app.useGlobalPipes(new ValidationPipe());

  app.enableCors({
    origin: '*', 
    methods: ['GET', 'HEAD', 'PATCH','POST', 'PUT', 'DELETE'],
    allowedHeaders: ['Content-Type', 'Authorization'],
  });

  const PORT = 3000;
  await app.listen(PORT, '0.0.0.0');

  console.log(`üöÄ Application is running on: http://localhost:${PORT}`);
}

bootstrap();
